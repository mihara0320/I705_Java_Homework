Implemented only fuctionarity of generating new figures.

At the moment, program doesn't always return a figure, sometime it fails... WIP
